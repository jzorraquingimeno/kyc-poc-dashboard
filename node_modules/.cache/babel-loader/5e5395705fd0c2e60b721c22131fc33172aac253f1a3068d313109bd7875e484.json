{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import Header from'./Header';import Sidebar from'./Sidebar';import{apiService}from'../services/api';import'./InvestigationReport.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const InvestigationReport=()=>{var _investigationData$ri;const{kvkNumber}=useParams();const navigate=useNavigate();const[loading,setLoading]=useState(true);const[apiStatus,setApiStatus]=useState('offline');const[investigationData,setInvestigationData]=useState(null);const[companyData,setCompanyData]=useState(null);// Load investigation data from API\nuseEffect(()=>{const loadInvestigationData=async()=>{if(!kvkNumber)return;try{setLoading(true);// First get company details to get the company name\nconst companyInfo=await apiService.getCompanyDetails(kvkNumber);setCompanyData(companyInfo);// Check API health\nconst health=await apiService.healthCheck();setApiStatus(health.status==='healthy'?'online':'offline');// Get investigation results from processKYC\nconst investigationResult=await apiService.processKYC({company_name:companyInfo.legalName,home_url:`https://example.com/${companyInfo.legalName.toLowerCase().replace(/\\s+/g,'-')}`,about_url:`https://example.com/${companyInfo.legalName.toLowerCase().replace(/\\s+/g,'-')}/about`});setInvestigationData(investigationResult);}catch(error){console.error('Failed to load investigation data:',error);setApiStatus('offline');}finally{setLoading(false);}};loadInvestigationData();},[kvkNumber]);const companyName=(companyData===null||companyData===void 0?void 0:companyData.legalName)||'Unknown Company';// Convert API response to findings format with fallback handling\nconst getFindings=()=>{if(!investigationData){console.log('No investigation data available');return[];}console.log('Investigation data structure:',investigationData);// Helper function to convert risk score to risk level\nconst getRiskLevel=score=>{if(score<=30)return'Low';if(score<=70)return'Medium';return'High';};const findings=[];// Try detailed risk assessment structure first\nif(investigationData.risk_assessment){const riskAssessment=investigationData.risk_assessment;console.log('Using detailed risk assessment data:',riskAssessment);// Process all risk categories\nconst riskCategories=[{key:'geo_risk',name:'Geographical Risk'},{key:'industry_risk',name:'Industry Risk'},{key:'structure_risk',name:'Structure Risk'},{key:'adverse_media_risk',name:'Adverse Media Risk'},{key:'sanctions_risk',name:'Sanctions Risk'},{key:'pep_risk',name:'PEP Risk'}];riskCategories.forEach(category=>{const riskData=riskAssessment[category.key];if(riskData){findings.push({category:riskData['Risk Category']||category.name,description:riskData.Summary||`${category.name}: ${riskData['Risk Description']||'No information available.'}`,risk:getRiskLevel(riskData['Risk Score']||0)});}});}// Fallback to simple findings structure\nelse if(investigationData.findings&&Array.isArray(investigationData.findings)){console.log('Using simple findings structure:',investigationData.findings);investigationData.findings.forEach((finding,index)=>{// Determine risk level based on overall risk score and finding content\nlet riskLevel=getRiskLevel(investigationData.risk_score||0);// Adjust risk level based on finding content\nconst findingLower=finding.toLowerCase();if(findingLower.includes('negative')||findingLower.includes('risk')||findingLower.includes('concern')){riskLevel='High';}else if(findingLower.includes('legitimate')||findingLower.includes('consistent')||findingLower.includes('no negative')){riskLevel='Low';}findings.push({category:`Investigation Finding ${index+1}`,description:finding,risk:riskLevel});});}// If no findings found, create a summary finding from the overall data\nif(findings.length===0&&(investigationData.risk_score!==undefined||investigationData.status)){console.log('Creating summary finding from overall data');const overallRisk=getRiskLevel(investigationData.risk_score||0);const status=investigationData.status||'Unknown';findings.push({category:'Overall Assessment',description:`Investigation completed with status: ${status}. Risk score: ${investigationData.risk_score||'Not available'}/100.`,risk:overallRisk});}console.log('Generated findings:',findings);return findings;};const findings=getFindings();// Generate risk scores from API data with fallback\nconst getRiskScores=()=>{const scores=[];// Try detailed risk assessment structure first\nif(investigationData!==null&&investigationData!==void 0&&investigationData.risk_assessment){const riskAssessment=investigationData.risk_assessment;const riskCategories=[{key:'geo_risk',name:'Geographical Risk',weight:20},{key:'industry_risk',name:'Industry Risk',weight:15},{key:'structure_risk',name:'Structure Risk',weight:25},{key:'adverse_media_risk',name:'Adverse Media Risk',weight:15},{key:'sanctions_risk',name:'Sanctions Risk',weight:15},{key:'pep_risk',name:'PEP Risk',weight:10}];riskCategories.forEach(category=>{const riskData=riskAssessment[category.key];if(riskData){scores.push({category:riskData['Risk Category']||category.name,score:riskData['Risk Score']||0,weight:category.weight});}});}// Fallback: create a single overall risk score\nelse if((investigationData===null||investigationData===void 0?void 0:investigationData.risk_score)!==undefined){scores.push({category:'Overall Risk Assessment',score:Math.round(investigationData.risk_score/10),// Convert from 0-100 to 0-10 scale\nweight:100});}return scores;};const riskScores=getRiskScores();// Use final_risk_score from API with fallback to risk_score (scale conversion)\nconst overallScore=(investigationData===null||investigationData===void 0?void 0:(_investigationData$ri=investigationData.risk_assessment)===null||_investigationData$ri===void 0?void 0:_investigationData$ri.final_risk_score)||(investigationData!==null&&investigationData!==void 0&&investigationData.risk_score?Math.round(investigationData.risk_score/10):0);// Generate conclusion based on overall score and available data\nconst getConclusion=()=>{var _investigationData$pu;const riskLevel=overallScore<=3?'LOW RISK':overallScore<=7?'MEDIUM RISK':'HIGH RISK';// Use available description from API\nconst companyDescription=investigationData===null||investigationData===void 0?void 0:(_investigationData$pu=investigationData.public_web_data)===null||_investigationData$pu===void 0?void 0:_investigationData$pu.company_description;const recommendations=investigationData===null||investigationData===void 0?void 0:investigationData.recommendations;let conclusion=`Based on comprehensive open-source investigation, ${companyName} presents a ${riskLevel} profile with a final risk score of ${overallScore}/10.`;if(companyDescription){conclusion+=` ${companyDescription.substring(0,300)}${companyDescription.length>300?'...':''}`;}else if(recommendations&&Array.isArray(recommendations)&&recommendations.length>0){conclusion+=` Key recommendation: ${recommendations[0]}`;}else{conclusion+=` Investigation completed successfully with detailed findings available above.`;}return conclusion;};const conclusion=loading?'Loading investigation results...':getConclusion();// Extract Evidence Locker from API sources\nconst getEvidenceLocker=()=>{if(!(investigationData!==null&&investigationData!==void 0&&investigationData.risk_assessment))return[];const evidence=[];const riskAssessment=investigationData.risk_assessment;const riskCategories=[{key:'geo_risk',name:'Geographical Risk'},{key:'industry_risk',name:'Industry Risk'},{key:'structure_risk',name:'Structure Risk'},{key:'adverse_media_risk',name:'Adverse Media Risk'},{key:'sanctions_risk',name:'Sanctions Risk'},{key:'pep_risk',name:'PEP Risk'}];riskCategories.forEach(category=>{const riskData=riskAssessment[category.key];if(riskData!==null&&riskData!==void 0&&riskData.Source){const categoryEvidence={category:riskData['Risk Category']||category.name,sources:[]};// Handle different source structures\nif(typeof riskData.Source==='object'){Object.keys(riskData.Source).forEach(sourceType=>{const sourceList=riskData.Source[sourceType];if(Array.isArray(sourceList)){sourceList.forEach(source=>{if(source.title&&source.link){categoryEvidence.sources.push({title:source.title,link:source.link,snippet:source.snippet||'No snippet available'});}});}});}if(categoryEvidence.sources.length>0){evidence.push(categoryEvidence);}}});return evidence;};const evidenceLocker=getEvidenceLocker();// Generate search keywords from company data\nconst getSearchKeywords=()=>{var _investigationData$pu2;if(!companyData&&!investigationData)return[];const keywords=[];if(companyData!==null&&companyData!==void 0&&companyData.legalName){keywords.push(companyData.legalName);// Add variations of company name\nconst nameParts=companyData.legalName.split(' ');if(nameParts.length>1){keywords.push(nameParts.slice(0,-1).join(' '));// Without legal form\n}}if(companyData!==null&&companyData!==void 0&&companyData.sbiDescription){keywords.push(companyData.sbiDescription);}if(investigationData!==null&&investigationData!==void 0&&(_investigationData$pu2=investigationData.public_web_data)!==null&&_investigationData$pu2!==void 0&&_investigationData$pu2.key_activities){keywords.push(investigationData.public_web_data.key_activities);}return keywords.slice(0,5);// Limit to 5 keywords\n};const searchKeywords=getSearchKeywords();return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"app-container\",children:[/*#__PURE__*/_jsx(Sidebar,{}),/*#__PURE__*/_jsxs(\"main\",{className:\"report-main\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"breadcrumb\",children:[/*#__PURE__*/_jsx(\"span\",{onClick:()=>navigate('/dashboard'),className:\"breadcrumb-link\",children:\"Dashboard\"}),/*#__PURE__*/_jsx(\"span\",{className:\"breadcrumb-separator\",children:\"\\u203A\"}),/*#__PURE__*/_jsx(\"span\",{onClick:()=>navigate('/dashboard'),className:\"breadcrumb-link\",children:\"Recent Tickets\"}),/*#__PURE__*/_jsx(\"span\",{className:\"breadcrumb-separator\",children:\"\\u203A\"}),/*#__PURE__*/_jsx(\"span\",{onClick:()=>navigate(`/ticket/${kvkNumber}`),className:\"breadcrumb-link\",children:companyName}),/*#__PURE__*/_jsx(\"span\",{className:\"breadcrumb-separator\",children:\"\\u203A\"}),/*#__PURE__*/_jsx(\"span\",{className:\"breadcrumb-current\",children:\"Investigation Report\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"report-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"report-title-section\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"OPEN-SOURCE INVESTIGATION REPORT\"}),!loading&&/*#__PURE__*/_jsx(\"div\",{className:`api-status-indicator ${apiStatus}`,children:apiStatus==='online'?'LIVE DATA':'Offline Mode'})]}),/*#__PURE__*/_jsx(\"h2\",{children:loading?'Loading Company...':companyName}),/*#__PURE__*/_jsxs(\"div\",{className:\"report-meta\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"KVK: \",kvkNumber]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Generated: \",new Date().toLocaleDateString()]})]})]}),loading?/*#__PURE__*/_jsxs(\"div\",{className:\"loading-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Processing investigation data...\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"report-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Search Keywords Used\"}),/*#__PURE__*/_jsx(\"div\",{className:\"keywords-container\",children:searchKeywords.map((keyword,index)=>/*#__PURE__*/_jsx(\"span\",{className:\"keyword-tag\",children:keyword},index))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"report-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"FINDINGS\"}),/*#__PURE__*/_jsx(\"div\",{className:\"findings-grid\",children:findings.length>0?findings.map((finding,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"finding-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"finding-header\",children:[/*#__PURE__*/_jsx(\"h4\",{children:finding.category}),/*#__PURE__*/_jsx(\"span\",{className:`risk-badge ${finding.risk.toLowerCase()}`,children:finding.risk})]}),/*#__PURE__*/_jsx(\"p\",{children:finding.description})]},index)):/*#__PURE__*/_jsxs(\"div\",{className:\"no-findings\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"No findings available. Check browser console for API response details.\"}),investigationData&&/*#__PURE__*/_jsxs(\"details\",{style:{marginTop:'1rem',padding:'1rem',background:'#f5f5f5',borderRadius:'8px'},children:[/*#__PURE__*/_jsx(\"summary\",{children:\"Debug: Raw API Response\"}),/*#__PURE__*/_jsx(\"pre\",{style:{fontSize:'12px',overflow:'auto',maxHeight:'300px'},children:JSON.stringify(investigationData,null,2)})]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"report-section conclusion-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"CONCLUSION\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"conclusion-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"score-display\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"score-circle\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"score-number\",children:overallScore}),/*#__PURE__*/_jsx(\"span\",{className:\"score-max\",children:\"/10\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"score-label\",children:/*#__PURE__*/_jsx(\"span\",{className:`risk-level ${overallScore<=3?'low':overallScore<=7?'medium':'high'}`,children:overallScore<=3?'LOW RISK':overallScore<=7?'MEDIUM RISK':'HIGH RISK'})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"conclusion-text\",children:/*#__PURE__*/_jsx(\"p\",{children:conclusion})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"report-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Risk Score Breakdown\"}),/*#__PURE__*/_jsx(\"div\",{className:\"score-breakdown\",children:riskScores.map((item,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"score-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"score-info\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"score-category\",children:item.category}),/*#__PURE__*/_jsxs(\"span\",{className:\"score-weight\",children:[\"Weight: \",item.weight,\"%\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"score-bar\",children:/*#__PURE__*/_jsx(\"div\",{className:\"score-fill\",style:{width:`${item.score/10*100}%`}})}),/*#__PURE__*/_jsxs(\"span\",{className:\"score-value\",children:[item.score,\"/10\"]})]},index))})]}),evidenceLocker.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"report-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Evidence Locker\"}),/*#__PURE__*/_jsx(\"div\",{className:\"evidence-categories\",children:evidenceLocker.map((category,categoryIndex)=>/*#__PURE__*/_jsxs(\"div\",{className:\"evidence-category\",children:[/*#__PURE__*/_jsx(\"h4\",{children:category.category}),/*#__PURE__*/_jsx(\"div\",{className:\"evidence-sources\",children:category.sources.map((source,sourceIndex)=>/*#__PURE__*/_jsxs(\"div\",{className:\"evidence-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"evidence-header\",children:/*#__PURE__*/_jsx(\"a\",{href:source.link,target:\"_blank\",rel:\"noopener noreferrer\",className:\"evidence-link\",children:source.title})}),/*#__PURE__*/_jsx(\"div\",{className:\"evidence-snippet\",children:source.snippet}),/*#__PURE__*/_jsx(\"div\",{className:\"evidence-url\",children:/*#__PURE__*/_jsx(\"small\",{children:source.link})})]},sourceIndex))})]},categoryIndex))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"report-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"action-btn primary\",onClick:()=>window.print(),children:\"Download Report\"}),/*#__PURE__*/_jsx(\"button\",{className:\"action-btn secondary\",onClick:()=>navigate(`/ticket/${kvkNumber}`),children:\"Back to Ticket\"}),/*#__PURE__*/_jsx(\"button\",{className:\"action-btn secondary\",onClick:()=>navigate('/dashboard'),children:\"Back to Dashboard\"})]})]})]})]})]});};export default InvestigationReport;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","Header","Sidebar","apiService","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","InvestigationReport","_investigationData$ri","kvkNumber","navigate","loading","setLoading","apiStatus","setApiStatus","investigationData","setInvestigationData","companyData","setCompanyData","loadInvestigationData","companyInfo","getCompanyDetails","health","healthCheck","status","investigationResult","processKYC","company_name","legalName","home_url","toLowerCase","replace","about_url","error","console","companyName","getFindings","log","getRiskLevel","score","findings","risk_assessment","riskAssessment","riskCategories","key","name","forEach","category","riskData","push","description","Summary","risk","Array","isArray","finding","index","riskLevel","risk_score","findingLower","includes","length","undefined","overallRisk","getRiskScores","scores","weight","Math","round","riskScores","overallScore","final_risk_score","getConclusion","_investigationData$pu","companyDescription","public_web_data","company_description","recommendations","conclusion","substring","getEvidenceLocker","evidence","Source","categoryEvidence","sources","Object","keys","sourceType","sourceList","source","title","link","snippet","evidenceLocker","getSearchKeywords","_investigationData$pu2","keywords","nameParts","split","slice","join","sbiDescription","key_activities","searchKeywords","className","children","onClick","Date","toLocaleDateString","map","keyword","style","marginTop","padding","background","borderRadius","fontSize","overflow","maxHeight","JSON","stringify","item","width","categoryIndex","sourceIndex","href","target","rel","window","print"],"sources":["/home/jzorraquingimeno/dashboard-frontend/src/components/InvestigationReport.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport Header from './Header';\nimport Sidebar from './Sidebar';\nimport { apiService } from '../services/api';\nimport './InvestigationReport.css';\n\ninterface Finding {\n  category: string;\n  description: string;\n  risk: 'Low' | 'Medium' | 'High';\n}\n\ninterface RiskScore {\n  category: string;\n  score: number;\n  weight: number;\n}\n\nconst InvestigationReport: React.FC = () => {\n  const { kvkNumber } = useParams<{ kvkNumber: string }>();\n  const navigate = useNavigate();\n  \n  const [loading, setLoading] = useState(true);\n  const [apiStatus, setApiStatus] = useState<'online' | 'offline'>('offline');\n  const [investigationData, setInvestigationData] = useState<any>(null);\n  const [companyData, setCompanyData] = useState<any>(null);\n\n  // Load investigation data from API\n  useEffect(() => {\n    const loadInvestigationData = async () => {\n      if (!kvkNumber) return;\n\n      try {\n        setLoading(true);\n        \n        // First get company details to get the company name\n        const companyInfo = await apiService.getCompanyDetails(kvkNumber);\n        setCompanyData(companyInfo);\n        \n        // Check API health\n        const health = await apiService.healthCheck();\n        setApiStatus(health.status === 'healthy' ? 'online' : 'offline');\n\n        // Get investigation results from processKYC\n        const investigationResult = await apiService.processKYC({\n          company_name: companyInfo.legalName,\n          home_url: `https://example.com/${companyInfo.legalName.toLowerCase().replace(/\\s+/g, '-')}`,\n          about_url: `https://example.com/${companyInfo.legalName.toLowerCase().replace(/\\s+/g, '-')}/about`\n        });\n\n        setInvestigationData(investigationResult);\n      } catch (error) {\n        console.error('Failed to load investigation data:', error);\n        setApiStatus('offline');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadInvestigationData();\n  }, [kvkNumber]);\n\n  const companyName = companyData?.legalName || 'Unknown Company';\n\n  // Convert API response to findings format with fallback handling\n  const getFindings = (): Finding[] => {\n    if (!investigationData) {\n      console.log('No investigation data available');\n      return [];\n    }\n\n    console.log('Investigation data structure:', investigationData);\n\n    // Helper function to convert risk score to risk level\n    const getRiskLevel = (score: number): 'Low' | 'Medium' | 'High' => {\n      if (score <= 30) return 'Low';\n      if (score <= 70) return 'Medium';\n      return 'High';\n    };\n\n    const findings: Finding[] = [];\n\n    // Try detailed risk assessment structure first\n    if (investigationData.risk_assessment) {\n      const riskAssessment = investigationData.risk_assessment;\n      console.log('Using detailed risk assessment data:', riskAssessment);\n\n      // Process all risk categories\n      const riskCategories = [\n        { key: 'geo_risk', name: 'Geographical Risk' },\n        { key: 'industry_risk', name: 'Industry Risk' },\n        { key: 'structure_risk', name: 'Structure Risk' },\n        { key: 'adverse_media_risk', name: 'Adverse Media Risk' },\n        { key: 'sanctions_risk', name: 'Sanctions Risk' },\n        { key: 'pep_risk', name: 'PEP Risk' }\n      ];\n\n      riskCategories.forEach(category => {\n        const riskData = riskAssessment[category.key];\n        if (riskData) {\n          findings.push({\n            category: riskData['Risk Category'] || category.name,\n            description: riskData.Summary || `${category.name}: ${riskData['Risk Description'] || 'No information available.'}`,\n            risk: getRiskLevel(riskData['Risk Score'] || 0)\n          });\n        }\n      });\n    }\n    \n    // Fallback to simple findings structure\n    else if (investigationData.findings && Array.isArray(investigationData.findings)) {\n      console.log('Using simple findings structure:', investigationData.findings);\n      \n      investigationData.findings.forEach((finding: string, index: number) => {\n        // Determine risk level based on overall risk score and finding content\n        let riskLevel: 'Low' | 'Medium' | 'High' = getRiskLevel(investigationData.risk_score || 0);\n        \n        // Adjust risk level based on finding content\n        const findingLower = finding.toLowerCase();\n        if (findingLower.includes('negative') || findingLower.includes('risk') || findingLower.includes('concern')) {\n          riskLevel = 'High';\n        } else if (findingLower.includes('legitimate') || findingLower.includes('consistent') || findingLower.includes('no negative')) {\n          riskLevel = 'Low';\n        }\n\n        findings.push({\n          category: `Investigation Finding ${index + 1}`,\n          description: finding,\n          risk: riskLevel\n        });\n      });\n    }\n\n    // If no findings found, create a summary finding from the overall data\n    if (findings.length === 0 && (investigationData.risk_score !== undefined || investigationData.status)) {\n      console.log('Creating summary finding from overall data');\n      \n      const overallRisk = getRiskLevel(investigationData.risk_score || 0);\n      const status = investigationData.status || 'Unknown';\n      \n      findings.push({\n        category: 'Overall Assessment',\n        description: `Investigation completed with status: ${status}. Risk score: ${investigationData.risk_score || 'Not available'}/100.`,\n        risk: overallRisk\n      });\n    }\n\n    console.log('Generated findings:', findings);\n    return findings;\n  };\n\n  const findings = getFindings();\n\n  // Generate risk scores from API data with fallback\n  const getRiskScores = (): RiskScore[] => {\n    const scores: RiskScore[] = [];\n\n    // Try detailed risk assessment structure first\n    if (investigationData?.risk_assessment) {\n      const riskAssessment = investigationData.risk_assessment;\n\n      const riskCategories = [\n        { key: 'geo_risk', name: 'Geographical Risk', weight: 20 },\n        { key: 'industry_risk', name: 'Industry Risk', weight: 15 },\n        { key: 'structure_risk', name: 'Structure Risk', weight: 25 },\n        { key: 'adverse_media_risk', name: 'Adverse Media Risk', weight: 15 },\n        { key: 'sanctions_risk', name: 'Sanctions Risk', weight: 15 },\n        { key: 'pep_risk', name: 'PEP Risk', weight: 10 }\n      ];\n\n      riskCategories.forEach(category => {\n        const riskData = riskAssessment[category.key];\n        if (riskData) {\n          scores.push({ \n            category: riskData['Risk Category'] || category.name, \n            score: riskData['Risk Score'] || 0, \n            weight: category.weight \n          });\n        }\n      });\n    }\n    \n    // Fallback: create a single overall risk score\n    else if (investigationData?.risk_score !== undefined) {\n      scores.push({\n        category: 'Overall Risk Assessment',\n        score: Math.round(investigationData.risk_score / 10), // Convert from 0-100 to 0-10 scale\n        weight: 100\n      });\n    }\n\n    return scores;\n  };\n\n  const riskScores = getRiskScores();\n\n  // Use final_risk_score from API with fallback to risk_score (scale conversion)\n  const overallScore = investigationData?.risk_assessment?.final_risk_score || \n                      (investigationData?.risk_score ? Math.round(investigationData.risk_score / 10) : 0);\n\n  // Generate conclusion based on overall score and available data\n  const getConclusion = (): string => {\n    const riskLevel = overallScore <= 3 ? 'LOW RISK' : overallScore <= 7 ? 'MEDIUM RISK' : 'HIGH RISK';\n    \n    // Use available description from API\n    const companyDescription = investigationData?.public_web_data?.company_description;\n    const recommendations = investigationData?.recommendations;\n    \n    let conclusion = `Based on comprehensive open-source investigation, ${companyName} presents a ${riskLevel} profile with a final risk score of ${overallScore}/10.`;\n    \n    if (companyDescription) {\n      conclusion += ` ${companyDescription.substring(0, 300)}${companyDescription.length > 300 ? '...' : ''}`;\n    } else if (recommendations && Array.isArray(recommendations) && recommendations.length > 0) {\n      conclusion += ` Key recommendation: ${recommendations[0]}`;\n    } else {\n      conclusion += ` Investigation completed successfully with detailed findings available above.`;\n    }\n    \n    return conclusion;\n  };\n\n  const conclusion = loading ? 'Loading investigation results...' : getConclusion();\n\n  // Extract Evidence Locker from API sources\n  const getEvidenceLocker = () => {\n    if (!investigationData?.risk_assessment) return [];\n    \n    const evidence: Array<{category: string, sources: Array<{title: string, link: string, snippet: string}>}> = [];\n    const riskAssessment = investigationData.risk_assessment;\n\n    const riskCategories = [\n      { key: 'geo_risk', name: 'Geographical Risk' },\n      { key: 'industry_risk', name: 'Industry Risk' },\n      { key: 'structure_risk', name: 'Structure Risk' },\n      { key: 'adverse_media_risk', name: 'Adverse Media Risk' },\n      { key: 'sanctions_risk', name: 'Sanctions Risk' },\n      { key: 'pep_risk', name: 'PEP Risk' }\n    ];\n\n    riskCategories.forEach(category => {\n      const riskData = riskAssessment[category.key];\n      if (riskData?.Source) {\n        const categoryEvidence = {\n          category: riskData['Risk Category'] || category.name,\n          sources: [] as Array<{title: string, link: string, snippet: string}>\n        };\n\n        // Handle different source structures\n        if (typeof riskData.Source === 'object') {\n          Object.keys(riskData.Source).forEach(sourceType => {\n            const sourceList = riskData.Source[sourceType];\n            if (Array.isArray(sourceList)) {\n              sourceList.forEach((source: any) => {\n                if (source.title && source.link) {\n                  categoryEvidence.sources.push({\n                    title: source.title,\n                    link: source.link,\n                    snippet: source.snippet || 'No snippet available'\n                  });\n                }\n              });\n            }\n          });\n        }\n\n        if (categoryEvidence.sources.length > 0) {\n          evidence.push(categoryEvidence);\n        }\n      }\n    });\n\n    return evidence;\n  };\n\n  const evidenceLocker = getEvidenceLocker();\n\n  // Generate search keywords from company data\n  const getSearchKeywords = (): string[] => {\n    if (!companyData && !investigationData) return [];\n    \n    const keywords: string[] = [];\n    \n    if (companyData?.legalName) {\n      keywords.push(companyData.legalName);\n      // Add variations of company name\n      const nameParts = companyData.legalName.split(' ');\n      if (nameParts.length > 1) {\n        keywords.push(nameParts.slice(0, -1).join(' ')); // Without legal form\n      }\n    }\n    \n    if (companyData?.sbiDescription) {\n      keywords.push(companyData.sbiDescription);\n    }\n    \n    if (investigationData?.public_web_data?.key_activities) {\n      keywords.push(investigationData.public_web_data.key_activities);\n    }\n    \n    return keywords.slice(0, 5); // Limit to 5 keywords\n  };\n\n  const searchKeywords = getSearchKeywords();\n\n\n  return (\n    <div className=\"App\">\n      <Header />\n      <div className=\"app-container\">\n        <Sidebar />\n        <main className=\"report-main\">\n          {/* Breadcrumb Navigation */}\n          <div className=\"breadcrumb\">\n            <span onClick={() => navigate('/dashboard')} className=\"breadcrumb-link\">\n              Dashboard\n            </span>\n            <span className=\"breadcrumb-separator\">›</span>\n            <span onClick={() => navigate('/dashboard')} className=\"breadcrumb-link\">\n              Recent Tickets\n            </span>\n            <span className=\"breadcrumb-separator\">›</span>\n            <span onClick={() => navigate(`/ticket/${kvkNumber}`)} className=\"breadcrumb-link\">\n              {companyName}\n            </span>\n            <span className=\"breadcrumb-separator\">›</span>\n            <span className=\"breadcrumb-current\">\n              Investigation Report\n            </span>\n          </div>\n\n          {/* Report Header */}\n          <div className=\"report-header\">\n            <div className=\"report-title-section\">\n              <h1>OPEN-SOURCE INVESTIGATION REPORT</h1>\n              {!loading && (\n                <div className={`api-status-indicator ${apiStatus}`}>\n                  {apiStatus === 'online' ? 'LIVE DATA' : 'Offline Mode'}\n                </div>\n              )}\n            </div>\n            <h2>{loading ? 'Loading Company...' : companyName}</h2>\n            <div className=\"report-meta\">\n              <span>KVK: {kvkNumber}</span>\n              <span>Generated: {new Date().toLocaleDateString()}</span>\n            </div>\n          </div>\n\n          {loading ? (\n            <div className=\"loading-content\">\n              <div className=\"loading-spinner\"></div>\n              <p>Processing investigation data...</p>\n            </div>\n          ) : (\n            <>\n              {/* Keywords Section */}\n              <div className=\"report-section\">\n                <h3>Search Keywords Used</h3>\n                <div className=\"keywords-container\">\n                  {searchKeywords.map((keyword, index) => (\n                    <span key={index} className=\"keyword-tag\">\n                      {keyword}\n                    </span>\n                  ))}\n                </div>\n              </div>\n\n          {/* Findings Section */}\n          <div className=\"report-section\">\n            <h3>FINDINGS</h3>\n            <div className=\"findings-grid\">\n              {findings.length > 0 ? (\n                findings.map((finding, index) => (\n                  <div key={index} className=\"finding-item\">\n                    <div className=\"finding-header\">\n                      <h4>{finding.category}</h4>\n                      <span className={`risk-badge ${finding.risk.toLowerCase()}`}>\n                        {finding.risk}\n                      </span>\n                    </div>\n                    <p>{finding.description}</p>\n                  </div>\n                ))\n              ) : (\n                <div className=\"no-findings\">\n                  <p>No findings available. Check browser console for API response details.</p>\n                  {investigationData && (\n                    <details style={{ marginTop: '1rem', padding: '1rem', background: '#f5f5f5', borderRadius: '8px' }}>\n                      <summary>Debug: Raw API Response</summary>\n                      <pre style={{ fontSize: '12px', overflow: 'auto', maxHeight: '300px' }}>\n                        {JSON.stringify(investigationData, null, 2)}\n                      </pre>\n                    </details>\n                  )}\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* Conclusion Section */}\n          <div className=\"report-section conclusion-section\">\n            <h3>CONCLUSION</h3>\n            <div className=\"conclusion-content\">\n              <div className=\"score-display\">\n                <div className=\"score-circle\">\n                  <span className=\"score-number\">{overallScore}</span>\n                  <span className=\"score-max\">/10</span>\n                </div>\n                <div className=\"score-label\">\n                  <span className={`risk-level ${overallScore <= 3 ? 'low' : overallScore <= 7 ? 'medium' : 'high'}`}>\n                    {overallScore <= 3 ? 'LOW RISK' : overallScore <= 7 ? 'MEDIUM RISK' : 'HIGH RISK'}\n                  </span>\n                </div>\n              </div>\n              <div className=\"conclusion-text\">\n                <p>{conclusion}</p>\n              </div>\n            </div>\n          </div>\n\n          {/* Risk Score Breakdown */}\n          <div className=\"report-section\">\n            <h3>Risk Score Breakdown</h3>\n            <div className=\"score-breakdown\">\n              {riskScores.map((item, index) => (\n                <div key={index} className=\"score-item\">\n                  <div className=\"score-info\">\n                    <span className=\"score-category\">{item.category}</span>\n                    <span className=\"score-weight\">Weight: {item.weight}%</span>\n                  </div>\n                  <div className=\"score-bar\">\n                    <div \n                      className=\"score-fill\"\n                      style={{ width: `${(item.score / 10) * 100}%` }}\n                    ></div>\n                  </div>\n                  <span className=\"score-value\">{item.score}/10</span>\n                </div>\n              ))}\n            </div>\n          </div>\n\n          {/* Evidence Locker */}\n          {evidenceLocker.length > 0 && (\n            <div className=\"report-section\">\n              <h3>Evidence Locker</h3>\n              <div className=\"evidence-categories\">\n                {evidenceLocker.map((category, categoryIndex) => (\n                  <div key={categoryIndex} className=\"evidence-category\">\n                    <h4>{category.category}</h4>\n                    <div className=\"evidence-sources\">\n                      {category.sources.map((source, sourceIndex) => (\n                        <div key={sourceIndex} className=\"evidence-item\">\n                          <div className=\"evidence-header\">\n                            <a \n                              href={source.link} \n                              target=\"_blank\" \n                              rel=\"noopener noreferrer\"\n                              className=\"evidence-link\"\n                            >\n                              {source.title}\n                            </a>\n                          </div>\n                          <div className=\"evidence-snippet\">\n                            {source.snippet}\n                          </div>\n                          <div className=\"evidence-url\">\n                            <small>{source.link}</small>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n              {/* Action Buttons */}\n              <div className=\"report-actions\">\n                <button \n                  className=\"action-btn primary\"\n                  onClick={() => window.print()}\n                >\n                  Download Report\n                </button>\n                <button \n                  className=\"action-btn secondary\"\n                  onClick={() => navigate(`/ticket/${kvkNumber}`)}\n                >\n                  Back to Ticket\n                </button>\n                <button \n                  className=\"action-btn secondary\"\n                  onClick={() => navigate('/dashboard')}\n                >\n                  Back to Dashboard\n                </button>\n              </div>\n            </>\n          )}\n        </main>\n      </div>\n    </div>\n  );\n};\n\nexport default InvestigationReport;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}